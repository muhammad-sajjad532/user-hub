<div class="dashboard-wrapper">
  
  <!-- Sidebar (same as dashboard) -->
  <aside class="sidebar" [class.collapsed]="isSidebarCollapsed">
    <div class="logo-section">
      <div class="logo">
        <i class="bi bi-people-fill"></i>
      </div>
      <h3 class="logo-text" *ngIf="!isSidebarCollapsed">User Hub</h3>
    </div>

    <nav class="sidebar-menu">
      <a href="javascript:void(0)" class="menu-item" [class.active]="activeMenu === 'dashboard'" (click)="setActiveMenu('dashboard')">
        <i class="bi bi-grid-fill"></i>
        <span *ngIf="!isSidebarCollapsed">Dashboard</span>
      </a>
      <a href="javascript:void(0)" class="menu-item" [class.active]="activeMenu === 'users'" (click)="setActiveMenu('users')">
        <i class="bi bi-people-fill"></i>
        <span *ngIf="!isSidebarCollapsed">Users</span>
      </a>
      <a href="javascript:void(0)" class="menu-item" [class.active]="activeMenu === 'report'" (click)="setActiveMenu('report')">
        <i class="bi bi-file-earmark-text-fill"></i>
        <span *ngIf="!isSidebarCollapsed">Report</span>
      </a>
      <a href="javascript:void(0)" class="menu-item" [class.active]="activeMenu === 'feedback'" (click)="setActiveMenu('feedback')">
        <i class="bi bi-chat-left-text-fill"></i>
        <span *ngIf="!isSidebarCollapsed">Feedback</span>
      </a>
      <a href="javascript:void(0)" class="menu-item" [class.active]="activeMenu === 'setting'" (click)="setActiveMenu('setting')">
        <i class="bi bi-gear-fill"></i>
        <span *ngIf="!isSidebarCollapsed">Settings</span>
      </a>
    </nav>

    <button class="logout-btn" (click)="onLogout()">
      <i class="bi bi-box-arrow-right"></i>
      <span *ngIf="!isSidebarCollapsed">Log Out</span>
    </button>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    
    <!-- Top Bar -->
    <header class="top-bar">
      <button class="menu-toggle" (click)="toggleSidebar()">
        <i class="bi bi-list"></i>
      </button>

      <div class="top-bar-right">
        <div class="notification-badge">
          <i class="bi bi-bell-fill"></i>
          <span class="badge" *ngIf="notificationCount > 0">{{ notificationCount }}</span>
        </div>
        <div class="user-profile">
          <img src="https://ui-avatars.com/api/?name={{ userName }}&background=6b7280&color=fff" alt="User">
          <div class="user-info">
            <span class="user-name">{{ userName }}</span>
            <span class="user-role" [ngClass]="getRoleBadgeClass()">{{ userRole }}</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Settings Content -->
    <div class="settings-container">
      
      <!-- Page Header -->
      <div class="page-header">
        <h2 class="page-title">Settings</h2>
        <p class="page-subtitle">Manage your account settings and preferences</p>
      </div>

      <!-- Success/Error Messages -->
      <div class="alert success" *ngIf="successMessage">
        <i class="bi bi-check-circle-fill"></i>
        {{ successMessage }}
      </div>
      <div class="alert error" *ngIf="errorMessage">
        <i class="bi bi-x-circle-fill"></i>
        {{ errorMessage }}
      </div>

      <!-- Settings Tabs -->
      <div class="settings-tabs">
        <button class="tab-btn" [class.active]="activeTab === 'profile'" (click)="setActiveTab('profile')">
          <i class="bi bi-person"></i>
          Profile
        </button>
        <button class="tab-btn" [class.active]="activeTab === 'password'" (click)="setActiveTab('password')">
          <i class="bi bi-shield-lock"></i>
          Password
        </button>
        <button class="tab-btn" [class.active]="activeTab === 'preferences'" (click)="setActiveTab('preferences')">
          <i class="bi bi-sliders"></i>
          Preferences
        </button>
      </div>

      <!-- Tab Content -->
      <div class="tab-content">
        
        <!-- Profile Tab -->
        <div class="tab-pane" *ngIf="activeTab === 'profile'">
          <div class="settings-card">
            <h3 class="card-title">Profile Information</h3>
            <form class="settings-form">
              <div class="form-group">
                <label>Full Name</label>
                <input type="text" [(ngModel)]="profileForm.name" name="name" class="form-control" placeholder="Enter your name">
              </div>
              <div class="form-group">
                <label>Email Address</label>
                <input type="email" [(ngModel)]="profileForm.email" name="email" class="form-control" placeholder="Enter your email">
              </div>
              <div class="form-group">
                <label>Phone Number</label>
                <input type="tel" [(ngModel)]="profileForm.phone" name="phone" class="form-control" placeholder="Enter your phone">
              </div>
              <div class="form-group">
                <label>Bio</label>
                <textarea [(ngModel)]="profileForm.bio" name="bio" class="form-control" rows="4" placeholder="Tell us about yourself"></textarea>
              </div>
              <button type="button" class="btn-primary" (click)="saveProfile()">
                <i class="bi bi-check-lg"></i>
                Save Changes
              </button>
            </form>
          </div>
        </div>

        <!-- Password Tab -->
        <div class="tab-pane" *ngIf="activeTab === 'password'">
          <div class="settings-card">
            <h3 class="card-title">Change Password</h3>
            <form class="settings-form">
              <div class="form-group">
                <label>Current Password</label>
                <input type="password" [(ngModel)]="passwordForm.currentPassword" name="currentPassword" class="form-control" placeholder="Enter current password">
              </div>
              <div class="form-group">
                <label>New Password</label>
                <input type="password" [(ngModel)]="passwordForm.newPassword" name="newPassword" class="form-control" placeholder="Enter new password">
              </div>
              <div class="form-group">
                <label>Confirm New Password</label>
                <input type="password" [(ngModel)]="passwordForm.confirmPassword" name="confirmPassword" class="form-control" placeholder="Confirm new password">
              </div>
              <button type="button" class="btn-primary" (click)="changePassword()">
                <i class="bi bi-shield-check"></i>
                Change Password
              </button>
            </form>
          </div>
        </div>

        <!-- Preferences Tab -->
        <div class="tab-pane" *ngIf="activeTab === 'preferences'">
          <div class="settings-card">
            <h3 class="card-title">Notifications</h3>
            <div class="preference-item">
              <div class="preference-info">
                <h4>Email Notifications</h4>
                <p>Receive email updates about your account</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="preferences.emailNotifications">
                <span class="slider"></span>
              </label>
            </div>
            <div class="preference-item">
              <div class="preference-info">
                <h4>Push Notifications</h4>
                <p>Receive push notifications in browser</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="preferences.pushNotifications">
                <span class="slider"></span>
              </label>
            </div>
          </div>

          <div class="settings-card">
            <h3 class="card-title">Appearance</h3>
            <div class="preference-item">
              <div class="preference-info">
                <h4>Dark Mode</h4>
                <p>Switch between light and dark theme</p>
              </div>
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="preferences.darkMode" (change)="toggleDarkMode()">
                <span class="slider"></span>
              </label>
            </div>
          </div>

          <div class="settings-card">
            <h3 class="card-title">Language</h3>
            <div class="form-group">
              <select [(ngModel)]="preferences.language" class="form-control">
                <option value="en">English</option>
                <option value="ur">Urdu</option>
                <option value="ar">Arabic</option>
              </select>
            </div>
          </div>

          <button type="button" class="btn-primary" (click)="savePreferences()">
            <i class="bi bi-check-lg"></i>
            Save Preferences
          </button>
        </div>

      </div>

    </div>
  </main>

</div>
