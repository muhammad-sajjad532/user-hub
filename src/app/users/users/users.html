<div class="dashboard-wrapper">
  
  <!-- Sidebar -->
  <aside class="sidebar" [class.collapsed]="isSidebarCollapsed">
    <!-- Logo Section -->
    <div class="logo-section">
      <div class="logo">
        <i class="bi bi-people-fill"></i>
      </div>
      <h3 class="logo-text" *ngIf="!isSidebarCollapsed">User Hub</h3>
    </div>

    <!-- Menu Items -->
    <nav class="sidebar-menu">
      <a 
        href="javascript:void(0)" 
        class="menu-item"
        [class.active]="activeMenu === 'dashboard'"
        (click)="setActiveMenu('dashboard')"
      >
        <i class="bi bi-grid-fill"></i>
        <span *ngIf="!isSidebarCollapsed">Dashboard</span>
      </a>

      <a 
        href="javascript:void(0)" 
        class="menu-item"
        [class.active]="activeMenu === 'users'"
        (click)="setActiveMenu('users')"
      >
        <i class="bi bi-people-fill"></i>
        <span *ngIf="!isSidebarCollapsed">Users</span>
      </a>

      <a 
        href="javascript:void(0)" 
        class="menu-item"
        [class.active]="activeMenu === 'report'"
        (click)="setActiveMenu('report')"
      >
        <i class="bi bi-file-earmark-text-fill"></i>
        <span *ngIf="!isSidebarCollapsed">Report</span>
      </a>

      <a 
        href="javascript:void(0)" 
        class="menu-item"
        [class.active]="activeMenu === 'feedback'"
        (click)="setActiveMenu('feedback')"
      >
        <i class="bi bi-chat-left-text-fill"></i>
        <span *ngIf="!isSidebarCollapsed">Feedback Management</span>
      </a>

      <a 
        href="javascript:void(0)" 
        class="menu-item"
        [class.active]="activeMenu === 'setting'"
        (click)="setActiveMenu('setting')"
      >
        <i class="bi bi-gear-fill"></i>
        <span *ngIf="!isSidebarCollapsed">Setting</span>
      </a>
    </nav>

    <!-- Logout Button -->
    <button class="logout-btn" (click)="onLogout()">
      <i class="bi bi-box-arrow-right"></i>
      <span *ngIf="!isSidebarCollapsed">Log Out</span>
    </button>
  </aside>

  <!-- Main Content -->
  <main class="main-content">
    
    <!-- Top Bar -->
    <header class="top-bar">
      <button class="menu-toggle" (click)="toggleSidebar()">
        <i class="bi bi-list"></i>
      </button>

      <div class="top-bar-right">
        <!-- Notification Badge -->
        <div class="notification-badge">
          <i class="bi bi-bell-fill"></i>
          <span class="badge" *ngIf="notificationCount > 0">{{ notificationCount }}</span>
        </div>

        <!-- User Profile -->
        <div class="user-profile">
          <img src="https://ui-avatars.com/api/?name={{ userName }}&background=3b82f6&color=fff" alt="User">
          <span class="user-name">{{ userName }}</span>
        </div>
      </div>
    </header>

    <!-- Users Content -->
    <div class="users-container">
      <!-- Header Section -->
      <div class="users-header">
        <h2 class="page-title">Users</h2>
        
        <div class="header-actions">
          <!-- Search Box with Autocomplete -->
          <div class="search-box">
            <i class="bi bi-search"></i>
            <input 
              type="text" 
              placeholder="Search profiles..." 
              [ngModel]="searchQuery"
              (ngModelChange)="onSearchChange($event)"
              (blur)="hideSuggestions()"
              class="search-input"
              autocomplete="off"
            />
            <button 
              *ngIf="searchQuery" 
              class="clear-search" 
              (click)="clearSearch()"
              type="button"
            >
              <i class="bi bi-x-lg"></i>
            </button>

            <!-- Autocomplete Suggestions Dropdown -->
            <div class="suggestions-dropdown" *ngIf="showSuggestions">
              <div 
                class="suggestion-item" 
                *ngFor="let suggestion of searchSuggestions"
                (mousedown)="selectSuggestion(suggestion)"
              >
                <i class="bi bi-person-circle"></i>
                <div class="suggestion-content">
                  <span class="suggestion-name">{{ suggestion.profileName }}</span>
                  <span class="suggestion-desc">{{ suggestion.description }}</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Add New Profile Button -->
          <button class="btn-add-profile" (click)="onAddNewProfile()">
            <i class="bi bi-plus-lg"></i>
            Add New Profile
          </button>
        </div>
      </div>

      <!-- Table Section -->
      <div class="table-container">
        <table class="users-table">
          <thead>
            <tr>
              <th>Sr No</th>
              <th>Profile Name</th>
              <th>Description</th>
              <th>Creation Date</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of paginatedUsers; let i = index">
              <td>{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
              <td>{{ user.profileName }}</td>
              <td>{{ user.description }}</td>
              <td>{{ user.creationDate }}</td>
              <td>
                <div class="action-buttons">
                  <button 
                    class="action-btn view-btn" 
                    (click)="onView(user)"
                    title="View"
                  >
                    <i class="bi bi-eye-fill"></i>
                  </button>
                  <button 
                    class="action-btn edit-btn" 
                    (click)="onEdit(user)"
                    title="Edit"
                  >
                    <i class="bi bi-pencil-fill"></i>
                  </button>
                  <button 
                    class="action-btn delete-btn" 
                    (click)="onDelete(user)"
                    title="Delete"
                  >
                    <i class="bi bi-trash-fill"></i>
                  </button>
                </div>
              </td>
            </tr>
            <tr *ngIf="filteredUsers.length === 0">
              <td colspan="5" class="no-results">No profiles found</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Pagination Section -->
      <div class="pagination-container">
        <div class="pagination-info">
          Showing {{ (currentPage - 1) * itemsPerPage + 1 }} - 
          {{ Math.min(currentPage * itemsPerPage, filteredUsers.length) }} 
          results of {{ filteredUsers.length }}
        </div>
        
        <div class="pagination-controls">
          <button 
            class="pagination-btn" 
            (click)="previousPage()"
            [disabled]="currentPage === 1"
          >
            <i class="bi bi-chevron-left"></i>
          </button>
          
          <span class="page-indicator">Page {{ currentPage }}</span>
          
          <button 
            class="pagination-btn" 
            (click)="nextPage()"
            [disabled]="currentPage >= totalPages"
          >
            <i class="bi bi-chevron-right"></i>
          </button>
        </div>
      </div>
    </div>
  </main>

  <!-- Success Modal -->
  <div class="modal-overlay" *ngIf="showSuccessModal" (click)="closeSuccessModal()">
    <div class="success-modal" (click)="$event.stopPropagation()">
      <div class="success-icon-circle">
        <i class="bi bi-check-lg"></i>
      </div>
      
      <h3 class="success-title">Success!</h3>
      
      <p class="success-message">{{ successMessage }}</p>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="modal-overlay" *ngIf="showDeleteModal" (click)="closeDeleteModal()">
    <div class="delete-modal" (click)="$event.stopPropagation()">
      <div class="delete-icon-circle">
        <i class="bi bi-trash-fill"></i>
      </div>
      
      <h3 class="delete-title">Delete</h3>
      
      <p class="delete-message">
        Are you sure you want to delete this record?<br>
        This action cannot be undone.
      </p>
      
      <div class="delete-actions">
        <button class="btn-cancel" (click)="closeDeleteModal()">
          <i class="bi bi-x-circle"></i>
          Cancel
        </button>
        <button class="btn-delete-confirm" (click)="confirmDelete()">
          <i class="bi bi-trash-fill"></i>
          Delete
        </button>
      </div>
    </div>
  </div>

  <!-- Modal for View/Edit -->
  <div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3 class="modal-title">
          {{ modalMode === 'view' ? 'View Profile' : modalMode === 'edit' ? 'Edit Profile' : 'Add New Profile' }}
        </h3>
        <button class="modal-close" (click)="closeModal()">
          <i class="bi bi-x-lg"></i>
        </button>
      </div>

      <div class="modal-body">
        <form>
          <!-- Profile Name -->
          <div class="form-group">
            <label for="profileName">Profile Name</label>
            <input
              type="text"
              id="profileName"
              class="form-control"
              [(ngModel)]="formData.profileName"
              name="profileName"
              [disabled]="modalMode === 'view'"
            />
          </div>

          <!-- Description -->
          <div class="form-group">
            <label for="description">Description</label>
            <textarea
              id="description"
              class="form-control"
              rows="4"
              [(ngModel)]="formData.description"
              name="description"
              [disabled]="modalMode === 'view'"
            ></textarea>
          </div>

          <!-- Creation Date -->
          <div class="form-group">
            <label for="creationDate">Creation Date</label>
            <input
              type="text"
              id="creationDate"
              class="form-control"
              [(ngModel)]="formData.creationDate"
              name="creationDate"
              disabled
            />
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button class="btn-secondary" (click)="closeModal()">
          {{ modalMode === 'view' ? 'Close' : 'Cancel' }}
        </button>
        <button 
          *ngIf="modalMode === 'edit' || modalMode === 'add'" 
          class="btn-primary" 
          (click)="saveUser()"
        >
          {{ modalMode === 'add' ? 'Add Profile' : 'Save Changes' }}
        </button>
      </div>
    </div>
  </div>

</div>

  <!-- Success Modal -->
  <div class="modal-overlay" *ngIf="showSuccessModal" (click)="closeSuccessModal()">
    <div class="success-modal" (click)="$event.stopPropagation()">
      <div class="success-icon-circle">
        <i class="bi bi-check-lg"></i>
      </div>
      
      <h3 class="success-title">Success!</h3>
      
      <p class="success-message">{{ successMessage }}</p>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="modal-overlay" *ngIf="showDeleteModal" (click)="closeDeleteModal()">
    <div class="delete-modal" (click)="$event.stopPropagation()">
      <div class="delete-icon-circle">
        <i class="bi bi-trash-fill"></i>
      </div>
      
      <h3 class="delete-title">Delete</h3>
      
      <p class="delete-message">
        Are you sure you want to delete this record?<br>
        This action cannot be undone.
      </p>
      
      <div class="delete-actions">
        <button class="btn-cancel" (click)="closeDeleteModal()">
          <i class="bi bi-x-circle"></i>
          Cancel
        </button>
        <button class="btn-delete-confirm" (click)="confirmDelete()">
          <i class="bi bi-trash-fill"></i>
          Delete
        </button>
      </div>
    </div>
  </div>

